# Telegram-Бот @IVRBot #
- - -
###### Telegram-клиент Кафедры Исследовательской и Проектной деятельности учащихся Лицея ВШЭ ######
###### Москва, 2018

## О боте 
Telegram-бот был создан в 2018 году в рамках проектной деятельности учащихся Лицея ВШЭ. 

Цель написания Telegram-бота - создание удобного инструмента коммуникации между администрацией Кафедры и учащимися.

Бот реализован на языке Python с помощью библиотек PyTelegramBotAPI и SQLite и использует базы данных для обработки информации о зарегестрированных пользователях.

Основной код Telegram-бота доступен в файле bot_main.py. Обширное количество комментариев дает возможность использовать код в качестве учебного для тех, кто только начинает разрабатывать Telegram-ботов.

## Шаг 1. Регистрация (или вход)
![Начало работы](Screenshots/Начало.png)

Начало работы классическое - в описании сказана пара слов о том, зачем этот бот нужен, а сам он вызывается по функции /start . 

После вызова бота ID сообщения - то есть ID пользователя - анализируется ботом. Он сравнивает ID со всеми, существующими в базе данных, и уже из этого делает вывод, нужна регистрация или нет. 

Если ID оказывается новым, то пользователь переходит к процедуре регистрации. Если ID уже есть в базе данных, то в зависимости от прошлой регистрации пользователь переходит либо в меню администратора, либо в меню ученика.


Бот не нашел ID в базе данных         | Бот нашел ID в базе
--------------------------------------|----------------------
 ![Нет ID](Screenshots/Нетвбазе.png) | ![ID есть](Screenshots/Естьвбазе.png)

Для того, чтобы зарегестрироваться, пользователю нужно придумать логин. 

Логин вводится самим пользователем в виде строки. Бот проверяет логин на уникальность (пробегая циклом по таблице) и заносит ID и логин в базу данных.

![Нет ID](Screenshots/Админилиученик.png)

Следующая развилка - статус пользователя. Если пользователь - ученик, то необходимо провести регистрацию его параметров и отправить в личный кабинет ученика. Если пользователь - администратор, то необходимо проверить пароль и направить пользователя в кабинет администратора.

Ученик может выбрать любой предмет и любой класс. В зависимости от этого ему будут отправляться те уведомления, которые нужны именно ему. Темы и класс выбираются из предлагающихся клавиатур (образованных методом ReplyKeyboardMarkup):

Сначала пользователь выбирает предмет,        | затем - класс
--------------------------------------|----------------------
 ![Нет ID](Screenshots/Темапользователя.png) | ![ID есть](Screenshots/Класспользователя.png)

На этом процесс регистрации пользователя заканчивается. Пользователь переходит в меню.

## Шаг 2. Меню (ученика и администратора)
Меню ученика и администратора выглядят следующим образом: 

Меню администратора | Меню пользователя
--------------------|----------------------
 ![Нет ID](Screenshots/Менюадминистратора.png) | ![ID есть](Screenshots/Менюученика.png)
